<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma Collection d'Albums</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Fond animé Vanta.js -->
    <div id="vanta-bg"></div>

    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-compact-disc"></i>
            <span>MusicLog</span>
        </div>
        <div class="nav-links">
            <a href="index.html" class="active"><i class="fas fa-home"></i> Collection</a>
            <a href="analytics.html"><i class="fas fa-chart-bar"></i> Analyses</a>
        </div>
    </nav>

    <main class="container">
        <header class="page-header">
            <h1>Ma Collection d'Albums</h1>
            <!-- <p>Enregistrez, notez et commentez vos albums préférés</p> -->
        </header>

        <!-- Formulaire d'ajout -->
        <section class="add-album-section">
            <h2><i class="fas fa-plus-circle"></i> Ajouter un Album</h2>
            
            <!-- Import depuis AOTY -->
            <div class="import-section">
                <h3><i class="fas fa-link"></i> Importer depuis Album of the Year</h3>
                <div class="import-form">
                    <div class="form-group">
                        <label for="aoty-url">Lien albumoftheyear.org</label>
                        <input type="url" id="aoty-url" placeholder="https://www.albumoftheyear.org/album/...">
                    </div>
                    <button type="button" id="import-btn" class="btn-import">
                        <i class="fas fa-download"></i> Récupérer les infos
                    </button>
                </div>
                <div id="import-status" class="import-status"></div>
            </div>

            <div class="divider">
                <span>Informations de l'album</span>
            </div>

            <form id="album-form" class="album-form">
                <!-- Prévisualisation de la pochette importée -->
                <div id="imported-cover-preview" class="imported-cover-preview" style="display: none;">
                    <img id="preview-cover-img" src="" alt="Pochette">
                    <button type="button" id="remove-cover" class="btn-remove-cover">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="album-title">Titre de l'album</label>
                        <input type="text" id="album-title" required placeholder="Ex: Abbey Road">
                    </div>
                    <div class="form-group">
                        <label for="artist-name">Artiste</label>
                        <input type="text" id="artist-name" required placeholder="Ex: The Beatles">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="genre">Genre</label>
                        <input type="text" id="genre" required placeholder="Ex: Rock, Pop, Hip-Hop...">
                    </div>
                    <div class="form-group">
                        <label for="release-year">Année de sortie</label>
                        <input type="number" id="release-year" min="1900" max="2030" placeholder="Ex: 1969">
                    </div>
                    <div class="form-group">
                        <label for="listen-date">Date d'écoute</label>
                        <input type="date" id="listen-date" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group rating-group">
                        <label>Note</label>
                        <div class="star-rating" id="star-rating">
                            <i class="fas fa-star" data-rating="1"></i>
                            <i class="fas fa-star" data-rating="2"></i>
                            <i class="fas fa-star" data-rating="3"></i>
                            <i class="fas fa-star" data-rating="4"></i>
                            <i class="fas fa-star" data-rating="5"></i>
                            <i class="fas fa-star" data-rating="6"></i>
                            <i class="fas fa-star" data-rating="7"></i>
                            <i class="fas fa-star" data-rating="8"></i>
                            <i class="fas fa-star" data-rating="9"></i>
                            <i class="fas fa-star" data-rating="10"></i>
                        </div>
                        <input type="hidden" id="rating" value="0">
                    </div>
                </div>
                <div class="form-group">
                    <label for="review">Avis</label>
                    <textarea id="review" rows="4" placeholder="Partagez votre avis sur cet album..."></textarea>
                </div>
                <input type="hidden" id="cover-url" value="">
                <input type="hidden" id="aoty-link" value="">
                <input type="hidden" id="album-format" value="">
                <div class="form-actions">
                    <button type="submit" class="btn-primary" id="submit-btn" disabled>
                        <i class="fas fa-save"></i> Enregistrer l'album
                    </button>
                    <button type="button" class="btn-secondary" id="clear-form-btn">
                        <i class="fas fa-eraser"></i> Vider le formulaire
                    </button>
                </div>
            </form>
        </section>

        <!-- Filtres et recherche -->
        <section class="filters-section">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="search-input" placeholder="Rechercher un album ou artiste...">
            </div>
            <div class="filter-options">
                <select id="filter-genre">
                    <option value="">Tous les genres</option>
                </select>
                <select id="filter-rating">
                    <option value="">Toutes les notes</option>
                    <option value="10">10 étoiles</option>
                    <option value="9">9+ étoiles</option>
                    <option value="8">8+ étoiles</option>
                    <option value="7">7+ étoiles</option>
                    <option value="6">6+ étoiles</option>
                    <option value="5">5+ étoiles</option>
                    <option value="less5">Moins de 5 étoiles</option>
                </select>
                <select id="sort-by">
                    <option value="date-desc">Plus récent</option>
                    <option value="date-asc">Plus ancien</option>
                    <option value="rating-desc">Meilleures notes</option>
                    <option value="rating-asc">Notes croissantes</option>
                    <option value="title-asc">A-Z</option>
                </select>
            </div>
        </section>

        <!-- Liste des albums -->
        <section class="albums-section">
            <div class="section-header">
                <h2><i class="fas fa-music"></i> Mes Albums</h2>
                <span class="album-count" id="album-count">0 albums</span>
            </div>
            <div class="albums-grid" id="albums-grid">
                <!-- Albums seront ajoutés dynamiquement -->
            </div>
            <div class="empty-state" id="empty-state">
                <i class="fas fa-record-vinyl"></i>
                <h3>Aucun album enregistré</h3>
                <p>Commencez à ajouter vos albums écoutés !</p>
            </div>
        </section>
    </main>

    <!-- Modal de détail/édition -->
    <div class="modal" id="album-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-body">
                <!-- Contenu dynamique -->
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2026 MusicLog - Votre journal musical personnel</p>
    </footer>

    <script src="app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.dots.min.js"></script>
    <script>
        VANTA.DOTS({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0x6d28d9,
            color2: 0x8b5cf6,
            backgroundColor: 0x0,
            size: 4.80,
            spacing: 25.00
        });
    </script>

    <!-- Bouton retour en haut -->
    <button id="back-to-top" class="back-to-top" title="Retour en haut">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Bouton retour en haut
        const backToTopBtn = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });
        
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</html>
